<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>药物信息列表</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f4faff;
            color: #333;
            padding-top: 80px;
        }

        .navbar {
            background-color: #0066cc;
        }

        .footer {
            background-color: #003366;
            color: #ccc;
            padding: 30px 0;
        }

        .footer a {
            color: #ccc;
            text-decoration: none;
        }

        .footer a:hover {
            color: #fff;
        }

        .bi {
            margin-right: 8px;
        }

        .section-title {
            color: #28a745;
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

<!-- 导航栏 -->
<div data-include="header.html"></div>

<!-- 药物列表内容 -->
<div class="container py-5">
    <h2 class="text-center section-title"><i class="bi bi-capsule-pill"></i>药物信息列表</h2>
    <table class="table table-bordered text-center">
        <thead class="table-light">
        <tr>
            <th>数据库 ID</th>
            <th>英文名</th>
            <th>中文名</th>
        </tr>
        </thead>
        <tbody id="drug-table-body">
        <tr>
            <td colspan="4" class="text-danger"><i class="bi bi-x-circle-fill"></i> 药物数据加载失败</td>
        </tr>
        </tbody>
    </table>
</div>


<!-- 页脚 -->
<footer class="footer mt-auto text-center">
    <div class="container">
        <p>&copy; 2025 MedLink 药物预测平台</p>
        <a href="#">关于我们</a> | <a href="#">联系我们</a>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/include.js"></script>
<script>
    // 获取药物数据并更新界面
    fetch('/api/drugs')
        .then(response => response.json())
        .then(data => {
            const tbody = document.getElementById('drug-table-body');
            if (data.length > 0) {
                tbody.innerHTML = ''; // 清空表格内容
                data.forEach(drug => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td>${drug.dbId ?? '-'}</td>
                        <td>${drug.englishName ?? '-'}</td>
                        <td>${drug.chineseName ?? '-'}</td>
                    `;
                    tbody.appendChild(tr);
                });
            } else {
                tbody.innerHTML = '<tr><td colspan="4" class="text-danger"><i class="bi bi-x-circle-fill"></i> 暂无药物数据</td></tr>';
            }
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('drug-table-body').innerHTML = '<tr><td colspan="4" class="text-danger"><i class="bi bi-x-circle-fill"></i> 药物数据加载失败</td></tr>';
        });
</script>


</body>
</html>
